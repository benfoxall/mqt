<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Example</title>
  </head>
  <body>
    <script src="mqt.js"></script>
    <script type="text/javascript">

      // var mqt = new MQT('ws://52.56.115.49:8083')
      // var mqt = new MQT('ws://46.101.93.93:8083')

      var mqt = new MQT('test.mosquitto.org:8080')

      mqt.subscribe('/foo', message => {
        console.log('MQT GOT', message)
      })

      mqt.publish('/foo', {hello: "world"})



      /* For testing round trip times

      var key = Math.random().toString(16).substr(3,8)
      var starts = new Map

      mqt.subscribe(`/bounce-${key}`, (message) => {
        var rt = Math.round(performance.now() - starts.get(message)) + 'ms'
        console.log(rt)
        starts.delete(message)
      })

      mqt.publish('/time2', 'whoop')
      let i = 1
      setInterval(() => {
        i++
        starts.set(i, performance.now())
        mqt.publish(`/bounce-${key}`, i)
      }, 3000)
      */



    </script>
  </body>
</html>
